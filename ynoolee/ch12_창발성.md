# 켄트 백의 단순한 설계 규칙 네가지

- 모든 테스트를 실행하라
- 중복을 없앤다
- 프로그래머의 의도를 표현한다
- 클래스와 메서드 수를 최소로 줄인다

## 모든 테스트를 실행하라( 사실 얘가 가장 중요함)

- 테스트가 가능한 시스템을 만들려고 애쓰다보면
    - 낮은 결합도, 높은 응집력 이라는 객체지향 방법론이 지향하는 목표를 저절로 달성할 수 있다.

테스트 코드 작성이 쉬운 코드를 만드려고 노력하다 보면

- 크기가 작고 목적 하나만 수행하는 SRP 를 준수하는 클래스를 작성하게 되기 때문이다.
- 또한 결합도가 높을 수록 테스트 코드 작성이 어려워져 ( 테스트 타겟 외의 외적 요인에 의한 영향을 많이 받기에 )
    - 결합도를 낮추기 위해 DIP 와 같은 원칙을 적용하고, DI, 인터페이스, 추상화 등의 도구를 사용하게 되기 때문이다.

> 이렇게 테스트 케이스가 모두 작성되어 있다면 점진적으로 리팩토링하면서도 시스템이 깨질까 걱정할 필요가 없다!!
>

---

## 리팩토링

- 점진적 리팩토링
    - 중복을 없애고, 응집도를 높이고, 결합도를 낮추고, 관심사를 분리 해 모듈로 나누고, 더 나은 이름을 선택 하는 등등 다양한 기법을 동원한다.

### 중복을 없애라

- 구현의 중복 없애기

```java
int size() {}
boolean isEmpty{
	int size = ...// 사이즈를 계산하는 로직 중복	
	return 0 == size;
}
```

아래와 같이 중복되는 로직을 없애자

```java
boolean isEmpty() {
  return 0 == size();
}
```

- 구현의 중복을 없애는 과정에서**, “공통적인 코드를 가진 작은 단위의 메서드” 를 추출**함 → **메서드의 기능을 보니, 이 클래스가 SRP 를 위반하는 것으로 보이는** 경우
    - **이 메서드를 다른 클래스로 옮겨 보자.**
- 추출한 공통 메서드를 **다른 클래스로 옮길 경우 장점**
    - 새로운 **메서드의 가시성이 높아**진다.
    - **다른 팀원이, 해당 메서드를 다른 맥락에서 재사용할 기회를 포착할** 수도 있다.
        - (내 생각) : 보통 하나의 클래스 내의 공통 메서드를 추출한다고 하면 private 메서드로 추출해 둔다. 이 경우 해당 로직이 필요한 다른 곳에서 이를 재사용할 수도 없고, 다른 팀원들 역시 이를 재사용할 생각을 하지 않을 확률이 높다. 따라서 책에서 말하는 것 과 같은 상황이라면 다른 클래스로 옮겨보면 좋을 것 같다.
    - 소규모 재사용!!! 을 익히면 대규모 재사용이 가능해질 것이다.
- 템플릿 메서드 패턴
    - 고차원의 중복을 제거하는 목적으로 자주 사용됨.
    - 하위 클래스는 중복되지 않는 정보만 제공하면 됨
    - 이거는 다들 자주 사용해보셨을 것 가트니 코드 패쓰

### 표현하라

자신이 이해하는 코드를 짜기는 쉽다. 세부적인 로직까지 다 이해한 상태에서 짜니까 ㅎ

유지보수 개발자는 죽을맛일 것이다.

- 좋은 이름
- 함수 클래스 크기 가능한 줄이기
- 표준 명칭 사용 - ex 특정 디자인패턴 사용한 클래스라면 클래스 이름에 해당 패턴 이름 붙여주는 것도 설계에 대한 의도 에 대한 이해를 높이는데 도움이 될 거임 (오호)
- 단위 테스트 케이스 꼼꼼히 작성하기 - 예제로 보여주는 코드 문서니까 → 클래스의 기능이 한눈에 들어옴

### 클래스와 메서드의 수를 최소로 줄이기 (가장 덜 중요)

- 중복 제거, SRP 준수 하는 것을 극단적으로 하다보면, 엄청 조그마한 클래스와 메서드가 수도 없이 만들어지기도 하기 때문이다.
- 무의미한 정책 때문에 이런경우도 생긴다
    - ex) 클래스마다 무조건 인터페이스 생성하기, 자료클래스와 동작 클래스는 무조건 분리하기

하지만 이 규칙은 가장 신경을 덜 써도 되는 규칙이다.

이보다는 테스트 작성 꼼꼼히 하고, 중복 제거, 의도 표현에 집중하자

## 결론

위의 설계규칙은 사실 크게 두 가지 규칙으로 분리할 수 있었다.

- 모든 테스트 작성 하고 실행하기
- 리팩토링하기

이 규칙은 훌륭한 개발자들의 경험에서 우러나온 것이다. 이 규칙을 따르려고 노력만 하더라도, 우수한 기법과 원칙을 활용하는 클린코드를 만드는데 나아갈 수 있을 것이다.
